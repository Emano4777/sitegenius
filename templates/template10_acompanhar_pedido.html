{% extends "template_base.html" %}
{% block title %}ğŸšš Acompanhamento do Pedido{% endblock %}

{% block content %}
<div class="container">
  <h2 class="titulo-produtos"><i class="fas fa-truck-moving"></i> Acompanhar Pedido #{{ pedido.id }}</h2>

  <div style="background: var(--card); padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 2rem;">
    <p><strong><i class="fas fa-info-circle"></i> Status:</strong> <span style="color: #28a745;">{{ pedido.status_entrega }}</span></p>
    <p><strong><i class="fas fa-shipping-fast"></i> Tipo de Entrega:</strong> <span style="color: #17a2b8;">{{ pedido.tipo_entrega }}</span></p>
    <p><strong><i class="fas fa-map-marker-alt"></i> EndereÃ§o:</strong> {{ pedido.endereco_entrega }}</p>
    <p><strong><i class="fas fa-coins"></i> Total:</strong> <span style="color: #28a745">R$ {{ '%.2f'|format(pedido.total) }}</span></p>
  </div>

  <h3 style="margin-bottom: 1rem;"><i class="fas fa-map"></i> LocalizaÃ§Ã£o da Entrega</h3>
  <iframe
    width="100%"
    height="300"
    frameborder="0"
    style="border:0; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);"
    src="https://www.google.com/maps?q={{ pedido.endereco_entrega | urlencode }}&output=embed"
    allowfullscreen>
  </iframe>

  {% if pedido.whatsapp_entregador and pedido.whatsapp_entregador.strip() %}
  <a href="https://wa.me/{{ pedido.whatsapp_entregador | replace(' ', '') }}" target="_blank" class="btn-voltar" style="background-color: #25d366; color: white; padding: 0.8rem 1.5rem; border-radius: 6px; font-weight: bold; text-decoration: none;">
    <i class="fab fa-whatsapp"></i> Contatar Entregador
  </a>
{% else %}
  <div class="btn-voltar" style="background-color: gray; color: white; padding: 0.8rem 1.5rem; border-radius: 6px; font-weight: bold;">
    <i class="fas fa-exclamation-circle"></i> Entregador ainda nÃ£o atribuÃ­do
  </div>
{% endif %}

  <div style="text-align: center; margin-top: 1.5rem;">
    <a class="btn-voltar" href="/{{ subdomain }}/meus-pedidos" style="background-color: #6c757d; color: white; padding: 0.7rem 1.5rem; border-radius: 6px; text-decoration: none; font-weight: bold;">
      <i class="fas fa-arrow-left"></i> Voltar para Meus Pedidos
    </a>
  </div>
</div>
{% endblock %}
